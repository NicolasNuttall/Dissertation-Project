$(function(){$("body").on("click","#save",function(e){var book_id=$(this).data("bookid"),obj=this;$.ajax({method:"POST",url:"/Readie/ajax/addbook.php",dataType:"json",data:{book_id:book_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success?($(obj).toggleClass("saved"),$(obj).text("Remove from shelf"),$(obj).toggleClass("save"),$(obj).attr("id","unsave")):$("body").append('<div class="sign-in-required"><div class="box"><h4>Sign In required!</h4><button onclick="closeRequireBox()">X</button><p>You need to be logged into an account to perform that action</p><div class="buttons d-flex"><a href="/Promotion/login">Login</a><a href="/Promotion/register">Create an account</a></div></div></div>')})}),$("body").on("click","#unsave",function(e){var book_id=$(this).data("bookid"),obj=this;$.ajax({method:"POST",url:"/Readie/ajax/addbook.php",dataType:"json",data:{book_id:book_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success&&($(obj).toggleClass("saved"),$(obj).text("Save"),$(obj).toggleClass("save"),$(obj).attr("id","save"))})})}),$(document).ready(function(){$(".close-window").click(function(){$(".pop-up-window").css("display","none")})}),$(document).ready(function(){$(".close-pop-up").click(function(){$(".create-custom-item-container").css("display","none")}),$("#create-custome-item-button").click(function(){$(".create-custom-item-container").css("display","flex")})}),$(document).ready(()=>{$("#createNote").click(()=>{$("#noteText").height("50px")})}),$(document).ready(function(){$(".icon-item").click(function(){$("#icon-select-preview").removeClass();var iconClass=this.children[0].classList.value;$("#icon-select-preview").addClass(iconClass)});$(document).click(event=>{$(event.target).closest(".icon-select-box").length||$(".icon-select").hide()}),$("#iconAdd").click(function(){$(".icon-select").toggle()}),$("#nav-create").click(function(){$("#dashboardCreationWindow").toggle()}),$(document).on("keyup",function(e){e.key="23",$(".pop-up-window").hide()})});const phrases=["Reading.","Notes.","Ideas."];let i=0,j=0,currentPhrase=[],wordEnded=!1,isEnd=!1;function charLoop(){isEnd=!1,i<phrases.length&&(!wordEnded&&j<=phrases[i].length&&(currentPhrase.push(phrases[i][j]),j++,$("#loginSpan").text(currentPhrase.join(""))),wordEnded&&j<=phrases[i].length&&(currentPhrase.pop(),j--,$("#loginSpan").text(currentPhrase.join(""))),j==phrases[i].length&&(isEnd=!0,wordEnded=!0),wordEnded&&0===j&&(currentPhrase=[],wordEnded=!1,i++,i===phrases.length&&(i=0)));var spedUp=30*Math.random()+50,time=100*Math.random()+100,time=isEnd?2e3:wordEnded?spedUp:time;setTimeout(charLoop,time)}$(document).ready(function(){charLoop()}),$(function(){$("#sidebarCollapse").on("click",function(){$("#sidebar, #content").toggleClass("active"),$(".burgerbar-button").toggleClass("active")})}),$(function(){var addNote=()=>{var book_id=$("#createNote").data("bookid"),note_data=$("#noteText").val();$.ajax({method:"POST",url:"/Readie/ajax/createnote.php",dataType:"json",data:{book_id:book_id,note_data:note_data},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".study-notes-container").append('<div class="study-note-item" id ='+rtnData.NoteID+'><h4><span><div class="note-menu"><ul><li><button class="edit-note" data-noteid="'+rtnData.NoteID+'">Edit Note</button></li><li><button class="publish-note" data-noteid="'+rtnData.NoteID+'">Publish Note</button></li><li><button class="delete-note" data-noteid="'+rtnData.NoteID+'">Delete Note</button></li></ul></div><i class="fas fa-ellipsis-v note-menu-icon"></i></span></h4><p class="'+rtnData.NoteID+'">'+note_data+"</p></div>"),$("#noteText").val("")})};$("body").on("click","#createNote",function(e){""!=$("#noteText").val()&&addNote()}),$(".expandText").on("keydown",function(){var txt=this;setTimeout(function(){txt.style.cssText="height:"+txt.scrollHeight+"px"},0),10!=event.keyCode&&13!=event.keyCode||!event.ctrlKey||""!=$("#noteText").val()&&addNote()}),$(".loadmore").each(function(index){$(this).prev().text().length<200&&$(this).hide()})}),$(document).ready(function(){$(this).on("click",".note-menu-icon",function(){$(this).prev().toggle()}),$("body").on("click",".loadmore",function(e){x=$(this).prev(),x.toggleClass("loadedtext")}),$(document).on("click",".delete-note",function(){var a=$(this).data("noteid");$(".page-content").append("<div class='pop-up-box-container'><div class='pop-up-box'><h4>Delete Note?</h4><p>This can't be undone. Your note will be permanently removed from our archive.</p><button id='delete-button' data-noteid='"+a+"'>Delete</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click",".publish-note",function(){var a=$(this).data("noteid");$(".page-content").append("<div class='pop-up-box-container'><div class='pop-up-box'><h4>Publish Note</h4><input placeholder='Note Title' id='note-title-input' type='text'><button id='publish-button' data-noteid='"+a+"'>Publish</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click",".edit-note",function(){var a=$(this).data("noteid"),text=$("."+a).text();$(".page-content").append("<div class='pop-up-box-container'><div class='edit-pop-up-box'><h4>Edit Note</h4><textarea   id='note-text-edit-input'>"+text+"</textarea><button id='edit-button' data-noteid='"+a+"'>Save Changes</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click","#cancel-button",function(){$(".pop-up-box-container").remove()}),$(document).on("click","#publish-button",function(){var note_id=$(this).data("noteid"),note_title=$("#note-title-input").val();$.ajax({method:"POST",url:"/Readie/ajax/publishnote.php",dataType:"json",data:{note_id:note_id,note_title:note_title},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove()})}),$(document).on("click","#edit-button",function(){var note_id=$(this).data("noteid"),note_text=$("#note-text-edit-input").val();$.ajax({method:"POST",url:"/Readie/ajax/editnote.php",dataType:"json",data:{note_id:note_id,note_text:note_text},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove(),$("."+note_id).text(rtnData)})}),$(document).on("click","#delete-button",function(){var note_id=$(this).data("noteid");$.ajax({method:"POST",url:"/Readie/ajax/deletenote.php",dataType:"json",data:{note_id:note_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove(),$("#"+note_id).remove()})})}),window.addEventListener("mouseup",function(e){var x;$(".study-note-item").length&&(x=document.querySelector(".note-menu"),event.target!=document.querySelector(".note-menu-icon")&&(x.style.display="none"))}),$(document).ready(()=>{let typingTimer;function doneTyping(){var search=$("#search-input").val();$.ajax({method:"GET",url:"https://www.googleapis.com/books/v1/volumes?q="+search,error:function(){$("div.search-results").remove()}}).done(function(results){$("div.search-results").remove(),$(".search-bar").append("<div class='search-results'></div>");let counter=0;jQuery.each(results.items,function(i,val){if(counter++,counter<6){let bookInfo={id:results.items[i].id,title:results.items[i].volumeInfo.title,subtitle:results.items[i].volumeInfo.subtitle,authors:results.items[i].volumeInfo.authors};bookInfo.image=void 0===results.items[i].volumeInfo.imageLinks?missingimg:results.items[i].volumeInfo.imageLinks.smallThumbnail,bookInfo.publishDate=void 0===results.items[i].volumeInfo.publishedDate?"":results.items[i].volumeInfo.publishedDate,$(".search-results").append("<a href='/Readie/bookpage/"+bookInfo.id+"' class='search-result'><div class='thumbnail'><img src="+bookInfo.image+"></div><div class='text-info'><h4>"+bookInfo.title+"</h4><p>"+bookInfo.authors+"</p></div></a>")}})})}$("#search-input").keyup(()=>{clearTimeout(typingTimer),typingTimer=setTimeout(doneTyping,400)}),$("#search-input").keydown(()=>{clearTimeout(typingTimer)})}),window.addEventListener("click",function(evt){var x;$(".search-result").length&&(x=document.querySelector(".search-results"),evt.target!=document.querySelector("#search-input")?x.style.display="none":(x.style.display="flex",console.log("to")))}),$(document).ready(()=>{var timer=null;$("#timerStart").click(()=>{var h=$("#hour").val(),m=$("#min").val(),s=$("#sec").val();$("#timerStart").toggle(),$("#timerStop").toggle(),$(".timer-input").prop("disabled",!0),function(h,m,s){timer=setInterval(function(){0<s?s--:0==s&&0<m?(s=59,m--):0==m&&0<h?(s=m=59,h--):0==s&&finishSession(),$("#sec").val(s),$("#min").val(m),$("#hour").val(h)},1e3)}(h,m,s)}),$("#timerStop").click(()=>{clearInterval(timer),$("#timerStart").toggle(),$("#timerStop").toggle(),$(".timer-input").prop("disabled",!1)});const finishSession=()=>{console.log("DONE"),clearInterval(timer),$(".page-content").append("<div class='pop-up-box-container'><div class='edit-pop-up-box study-finish'><h4>Session Finished</h4><p>Time's up! All the notes you've created have been saved to the notes page. Meanwhile, you can use the  <span><i class='fa fa-ellipsis-v'></i></span> menu to publish, edit or delete your notes. </p><button id='cancel-button' class='cool'>Cool!</button></div></div>")}});