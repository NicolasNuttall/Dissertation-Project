function preventDefaults(e){e.preventDefault(),e.stopPropagation()}function AvatarEdit(file,ava){file=file.files[0];if(file){const reader=new FileReader;reader.addEventListener("load",function(){document.getElementById(ava).setAttribute("style","background-image: url("+this.result+")")}),reader.readAsDataURL(file)}}function Mark(x){x.classList.toggle("marked")}function closeRequireBox(){$(".sign-in-required").remove()}function FollowToggle(elm){"Follow"===elm.innerHTML?(elm.innerHTML="Following",elm.classList.add("following-anim")):(elm.innerHTML="Follow",elm.classList.remove("following-anim")),elm.classList.toggle("following")}function updateThumbnail(file,thumImage){file=file.files[0];if(file){const reader=new FileReader;reader.addEventListener("load",function(){document.getElementById(thumImage).setAttribute("src",this.result)}),reader.readAsDataURL(file)}}function removeTag(tagValue){let deletedTag=tagValue.closest(".tag");tagValue=$(tagValue).closest(".tag").text();$("#tagArray").val($("#tagArray").val().replace(tagValue,"")),deletedTag.remove()}$(function(){$("body").on("click","#deleteTutorial",function(e){var tutorial_id;1==confirm("Delete this Tutorial?")&&(tutorial_id=$(this).data("tutorialid"),$.ajax({method:"POST",url:"/Promotion/ajax/deleteTutorial.php",dataType:"json",data:{tutorial_id:tutorial_id},success:function(data){data.link&&(window.location.href=data.link)},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){console.log(rtnData)}))})}),$(function(){$("body").on("click","#mark",function(e){var tutorial_id=$(this).data("tutorialid"),obj=this;$.ajax({method:"POST",url:"/Promotion/ajax/finish.php",dataType:"json",data:{tutorial_id:tutorial_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success?($(obj).hasClass("mark-vector")?$(obj).toggleClass("marked"):($("#mark").text("Unmark as Finished"),$("#mark").toggleClass("finished")),$("#mark").attr("id","unMark")):$("body").append('<div class="sign-in-required"><div class="box"><h4>Sign In required!</h4><button onclick="closeRequireBox()">X</button><p>You need to be logged into an account to perform that action</p><div class="buttons d-flex"><a href="/Promotion/login">Login</a><a href="/Promotion/register">Create an account</a></div></div></div>')})}),$("body").on("click","#unMark",function(e){var tutorial_id=$(this).data("tutorialid"),obj=this;$.ajax({method:"POST",url:"/Promotion/ajax/finish.php",dataType:"json",data:{tutorial_id:tutorial_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success&&($(obj).hasClass("mark-vector")?$(obj).toggleClass("marked"):($("#unMark").text("Mark as Finished"),$("#unMark").toggleClass("finished")),$("#unMark").attr("id","mark"))})})}),$("textarea").on("keydown",function(){var txt=this;setTimeout(function(){txt.style.cssText="height:auto; padding:0",txt.style.cssText="height:"+txt.scrollHeight+"px"},0)}),$(function(){$("body").on("click","#comment",function(e){var tutorial_id=$(this).data("tutorialid"),comment_data=$("#commentText").val();$.ajax({method:"POST",url:"/Promotion/ajax/comment.php",dataType:"json",data:{tutorial_id:tutorial_id,comment_data:comment_data},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$("#commentText").val("")})})}),$(function(){$("body").on("click","#Like",function(e){var tutorial_id=$(this).data("tutorialid"),obj=this;$.ajax({method:"POST",url:"/Promotion/ajax/like.php",dataType:"json",data:{tutorial_id:tutorial_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success?($(obj).children("span").text(parseInt($(obj).children("span").text())+1),$(obj).attr("id","unLike"),$(obj).children().toggleClass("liked")):$("body").append('<div class="sign-in-required"><div class="box"><h4>Sign In required!</h4><button onclick="closeRequireBox()">X</button><p>You need to be logged into an account to perform that action</p><div class="buttons d-flex"><a href="/Promotion/login">Login</a><a href="/Promotion/register">Create an account</a></div></div></div>')})}),$("body").on("click","#unLike",function(e){var tutorial_id=$(this).data("tutorialid"),obj=this;$.ajax({method:"POST",url:"/Promotion/ajax/like.php",dataType:"json",data:{tutorial_id:tutorial_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success&&($(obj).children("span").text(parseInt($(obj).children("span").text())-1),$(obj).attr("id","Like"),$(obj).children().toggleClass("liked"))})})}),$(".expandText").on("keydown",function(){var txt=this;setTimeout(function(){txt.style.cssText="height:"+txt.scrollHeight+"px"},0)}),$("#upload-form input").on("keyup keypress",function(e){if("Enter"===(e.key||e.which))return e.preventDefault(),!1}),$("#tagInput").on("keyup",function(event){var tagValue=this.value,randomHue=Math.round(255*Math.random()+0);$(this).val($(this).val().replace(/[^a-z0-9]/gi,"")),"Enter"===event.key&&""!=this.value&&($("#tags").append('<div style="background-color:hsl('+randomHue+',30%,80%);"class="tag"><p>'+tagValue+'<span><i class="far fa-times-circle x" onclick="removeTag(this)"></i></span></p></div>'),$("#tagArray").val($("#tagArray").val()+this.value+"?"),this.value="")}),$(function(){$("body").on("click","#follow",function(e){var username=$(this).data("username"),obj=this;$.ajax({method:"POST",url:"/Promotion/ajax/follow.php",dataType:"json",data:{username:username},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success?($(obj).text("Unfollow"),$(obj).attr("id","unFollow"),$(obj).toggleClass("following")):$("body").append('<div class="sign-in-required"><div class="box"><h4>Sign In required!</h4><button onclick="closeRequireBox()">X</button><p>You need to be logged into an account to perform that action</p><div class="buttons d-flex"><a href="/Promotion/login">Login</a><a href="/Promotion/register">Create an account</a></div></div></div>')})}),$("body").on("click","#unFollow",function(e){var username=$(this).data("username"),obj=this;$.ajax({method:"POST",url:"/Promotion/ajax/follow.php",dataType:"json",data:{username:username},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success&&($(obj).text("Follow"),$(obj).attr("id","follow"),$(obj).toggleClass("following"))})})});