$(function(){$("body").on("click","#save_note",function(e){var note_id=$(this).data("noteid"),obj=this;$.ajax({method:"POST",url:"/Readie/ajax/savenote.php",dataType:"json",data:{note_id:note_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success?($(obj).attr("id","unsave_note"),$(obj).toggleClass("active-like-button"),$(obj).addClass("like-anim")):$("body").append('<div class="sign-in-required"><div class="box"><h4>Sign In required!</h4><button onclick="closeRequireBox()">X</button><p>You need to be logged into an account to perform that action</p><div class="buttons d-flex"><a href="/Promotion/login">Login</a><a href="/Promotion/register">Create an account</a></div></div></div>')})}),$("body").on("click","#unsave_note",function(e){var note_id=$(this).data("noteid"),obj=this;$.ajax({method:"POST",url:"/Readie/ajax/savenote.php",dataType:"json",data:{note_id:note_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success&&($(obj).attr("id","save_note"),$(obj).toggleClass("active-like-button"),$(obj).removeClass("like-anim"))})})}),$(function(){$("body").on("click","#save",function(e){var book_id=$(this).data("bookid"),obj=this;$.ajax({method:"POST",url:"/Readie/ajax/addbook.php",dataType:"json",data:{book_id:book_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success?($(obj).toggleClass("saved"),$(obj).text("Remove from Bookshelf"),$(obj).toggleClass("save"),$(obj).attr("id","unsave")):$("body").append('<div class="sign-in-required"><div class="box"><h4>Sign In required!</h4><button onclick="closeRequireBox()">X</button><p>You need to be logged into an account to perform that action</p><div class="buttons d-flex"><a href="/Promotion/login">Login</a><a href="/Promotion/register">Create an account</a></div></div></div>')})}),$("body").on("click","#unsave",function(e){var book_id=$(this).data("bookid"),obj=this;$.ajax({method:"POST",url:"/Readie/ajax/addbook.php",dataType:"json",data:{book_id:book_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){1==rtnData.success&&($(obj).toggleClass("saved"),$(obj).text("Add to Bookshelf"),$(obj).toggleClass("save"),$(obj).attr("id","save"))})})}),$(document).ready(function(){$(".close-window").click(function(){$(".pop-up-window").css("display","none")})}),$(document).ready(function(){$(".close-pop-up").click(function(){$(".create-custom-item-container").css("display","none")}),$("#create-custome-item-button").click(function(){$(".create-custom-item-container").css("display","flex")})}),$(document).ready(()=>{$("#createNote").click(()=>{$("#noteText").height("50px")})}),$(document).ready(function(){$("body").on("click",".goal-option",function(){$(".preset-goals div").removeClass("selected-goal"),$(this).addClass("selected-goal")}),$("body").on("click","#setgoal",function(){let goalNumber;$("#goalNumber").val()?goalNumber=3600*$("#goalNumber").val():!$("#goalNumber").val()&&$(".selected-goal").data("goalint")&&(goalNumber=$(".selected-goal").data("goalint")),0<goalNumber&&$.ajax({method:"POST",url:"/Readie/ajax/goalset.php",dataType:"json",data:{goalNumber:goalNumber},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".set-goal").append("<div class='success'><p>Goal successfully saved!</p></div>"),setTimeout(function(){$(".success").remove()},5e3)})}),$("#edit-goal").on("click",function(){$(".set-goal").toggleClass("d-flex")})}),$(function(){var submitEntry=()=>{var first_question=$("#q1").val(),second_question=$("#q2").val();$.ajax({method:"POST",url:"/Readie/ajax/journalsubmit.php",dataType:"json",data:{q1:first_question,q2:second_question},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){location.reload()})};$("body").on("click","#journal-submit",function(){$("#q1").val()&&(submitEntry(),console.log("b"))}),$(".studyJournal").on("keydown",function(){10!=event.keyCode&&13!=event.keyCode||!event.ctrlKey||""!=$("#q1").val()&&submitEntry()}),$("#archive-toggle").on("click",function(){$(this).next().toggleClass("d-flex")}),$(document).on("click",".delete-journal",function(){var a=$(this).data("journid");$(".page-content").append("<div class='pop-up-box-container'><div class='pop-up-box'><h4>Delete Entry?</h4><p>This can't be undone. Your journal entry will be permanently removed from our archive.</p><button id='delete-journ-button' data-journid='"+a+"'>Delete</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click",".edit-journal",function(){var a=$(this).data("journid"),q1=$("."+a).text(),q2=$("."+a+"2").text();$(".page-content").append("<div class='pop-up-box-container'><div class='edit-pop-up-box'><h4>Edit Entry</h4><label for='journ-text-edit-input'></label><textarea  id='journ-text-edit-input'>"+q1+"</textarea><label for='journ-text-edit-input2'></label><textarea id='journ-text-edit-input2'>"+q2+"</textarea><button id='edit-journ-button' data-journid='"+a+"'>Save Changes</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click","#edit-journ-button",function(){var journ_id=$(this).data("journid"),journ_text=$("#journ-text-edit-input").val(),journ_text2=$("#journ-text-edit-input2").val();$.ajax({method:"POST",url:"/Readie/ajax/editjourn.php",dataType:"json",data:{journ_id:journ_id,journ_text:journ_text,journ_text2:journ_text2},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove(),$("."+journ_id).text(journ_text),$("."+journ_id+"2").text(journ_text2)})}),$(document).on("click","#delete-journ-button",function(){var journ_id=$(this).data("journid");$.ajax({method:"POST",url:"/Readie/ajax/deletejourn.php",dataType:"json",data:{journ_id:journ_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove(),$("#"+journ_id).remove()})})});const phrases=["Reading.","Notes.","Ideas."];let i=0,j=0,currentPhrase=[],wordEnded=!1,isEnd=!1;function charLoop(){isEnd=!1,i<phrases.length&&(!wordEnded&&j<=phrases[i].length&&(currentPhrase.push(phrases[i][j]),j++,$("#loginSpan").text(currentPhrase.join(""))),wordEnded&&j<=phrases[i].length&&(currentPhrase.pop(),j--,$("#loginSpan").text(currentPhrase.join(""))),j==phrases[i].length&&(isEnd=!0,wordEnded=!0),wordEnded&&0===j&&(currentPhrase=[],wordEnded=!1,i++,i===phrases.length&&(i=0)));var spedUp=30*Math.random()+50,time=100*Math.random()+100,time=isEnd?2e3:wordEnded?spedUp:time;setTimeout(charLoop,time)}$(document).ready(function(){charLoop()}),$(function(){$("#sidebarCollapse").on("click",function(){$("#sidebar, #content").toggleClass("active"),$(".burgerbar-button").toggleClass("active")})}),$(function(){var addNote=()=>{var book_id=$("#createNote").data("bookid"),note_data=$("#noteText").val();$.ajax({method:"POST",url:"/Readie/ajax/createnote.php",dataType:"json",data:{book_id:book_id,note_data:note_data},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".study-notes-container").append('<div class="study-note-item" id ='+rtnData.NoteID+'><h4><span><div class="note-menu"><ul><li><button class="edit-note" data-noteid="'+rtnData.NoteID+'">Edit Note</button></li><li><button class="publish-note" data-noteid="'+rtnData.NoteID+'">Publish Note</button></li><li><button class="delete-note" data-noteid="'+rtnData.NoteID+'">Delete Note</button></li></ul></div><i class="fas fa-ellipsis-v note-menu-icon"></i></span></h4><p class="'+rtnData.NoteID+'">'+note_data+"</p></div>"),$("#noteText").val("")})};$("body").on("click","#createNote",function(e){""!=$("#noteText").val()&&addNote()}),$(".expandText").on("keydown",function(){var txt=this;setTimeout(function(){txt.style.cssText="height:"+txt.scrollHeight+"px"},0),10!=event.keyCode&&13!=event.keyCode||!event.ctrlKey||""!=$("#noteText").val()&&addNote()}),$(".loadmore").each(function(index){$(this).prev().text().length<200&&$(this).hide()})}),$(document).ready(function(){$(this).on("click",".note-menu-icon",function(){$(this).prev().toggle()}),$("body").on("click",".loadmore",function(e){x=$(this).prev(),x.toggleClass("loadedtext")}),$(document).on("click",".delete-note",function(){var a=$(this).data("noteid");$(".page-content").append("<div class='pop-up-box-container'><div class='pop-up-box'><h4>Delete Note?</h4><p>This can't be undone. Your note will be permanently removed from our archive.</p><button id='delete-button' data-noteid='"+a+"'>Delete</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click",".publish-note",function(){var a=$(this).data("noteid");$(".page-content").append("<div class='pop-up-box-container'><div class='pop-up-box'><h4>Publish Note</h4><input placeholder='Note Title' id='note-title-input' type='text'><button id='publish-button' data-noteid='"+a+"'>Publish</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click",".edit-note",function(){var a=$(this).data("noteid"),text=$("."+a).text(),title=$(".x"+a).text();$(".page-content").append("<div class='pop-up-box-container'><div class='edit-pop-up-box'><h4>Edit Note</h4><input id='note-title-input' type='text' value='"+title+"'><textarea  id='note-text-edit-input'>"+text+"</textarea><button id='edit-button' data-noteid='"+a+"'>Save Changes</button><button id='cancel-button'>Cancel</button></div></div>")}),$(document).on("click","#cancel-button",function(){$(".pop-up-box-container").remove()}),$(document).on("click","#publish-button",function(){var note_id=$(this).data("noteid"),note_title=$("#note-title-input").val();$.ajax({method:"POST",url:"/Readie/ajax/publishnote.php",dataType:"json",data:{note_id:note_id,note_title:note_title},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove()})}),$(document).on("click","#edit-button",function(){var note_id=$(this).data("noteid"),note_text=$("#note-text-edit-input").val(),note_title=$("#note-title-input").val();$.ajax({method:"POST",url:"/Readie/ajax/editnote.php",dataType:"json",data:{note_id:note_id,note_text:note_text,note_title:note_title},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove(),$("."+note_id).text(rtnData)})}),$(document).on("click","#delete-button",function(){var note_id=$(this).data("noteid");$.ajax({method:"POST",url:"/Readie/ajax/deletenote.php",dataType:"json",data:{note_id:note_id},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".pop-up-box-container").remove(),$("#"+note_id).remove()})})}),window.addEventListener("mouseup",function(e){var x;$(".study-note-item").length&&(x=document.querySelector(".note-menu"),event.target!=document.querySelector(".note-menu-icon")&&(x.style.display="none"))}),$(document).ready(()=>{let typingTimer;function noteDoneTyping(){var query=0==$("#note-search-input").val().length?"show-all-notes":$("#note-search-input").val();$.ajax({method:"POST",url:"/Readie/ajax/searchnotes.php",dataType:"json",data:{query:query},error:function(){console.log("A")}}).done(function(results){$(".notes-boxes").remove(),$(".your-notes-container").append("<div class='notes-boxes'></div>"),results&&jQuery.each(results,function(i,val){results[i].liked?$(".notes-boxes").append('<div class="note-box" id="'+results[i].NoteID+'"><i class="like-button far fa-heart active-like-button" id="unsave_note" data-noteid="'+results[i].NoteID+'" ></i><h4 class="x'+ +results[i].NoteID+'">'+results[i].Note_Title+'<span> <div class="note-menu"> <ul> <li> <button class="edit-note" data-noteid="'+results[i].NoteID+'"> Edit Note </button> </li> <li> <button class="publish-note" data-noteid="'+results[i].NoteID+'"> Publish Note </button> </li> <li> <button class="delete-note" data-noteid="'+results[i].NoteID+'"> Delete Note </button> </li> </ul> </div> <i class="fas fa-ellipsis-v note-menu-icon"></i> </span> </h4> <p class="noteauthor">By '+results[i].Username+'</p> <p class="'+results[i].NoteID+' note-text">'+results[i].NoteContent+'}</p> <p class="loadmore">Read More</p> <p class="mt-4"><i>'+results[i].age+'</i></p> <a href="/Readie/summary/'+results[i].BookID+'" class="book-info"> <img src="'+results[i].bookinfo.BookImage+'" alt="" /> </a> </div>'):$(".notes-boxes").append('<div class="note-box" id="'+results[i].NoteID+'"><i class="like-button far fa-heart" id="save_note" data-noteid="'+results[i].NoteID+'" ></i><h4 class="x'+ +results[i].NoteID+'">'+results[i].Note_Title+'<span> <div class="note-menu"> <ul> <li> <button class="edit-note" data-noteid="'+results[i].NoteID+'"> Edit Note </button> </li> <li> <button class="publish-note" data-noteid="'+results[i].NoteID+'"> Publish Note </button> </li> <li> <button class="delete-note" data-noteid="'+results[i].NoteID+'"> Delete Note </button> </li> </ul> </div> <i class="fas fa-ellipsis-v note-menu-icon"></i> </span> </h4> <p class="noteauthor">By '+results[i].Username+'</p> <p class="'+results[i].NoteID+' note-text">'+results[i].NoteContent+'}</p> <p class="loadmore">Read More</p> <p class="mt-4"><i>'+results[i].age+'</i></p> <a href="/Readie/summary/'+results[i].BookID+'" class="book-info"> <img src="'+results[i].bookinfo.BookImage+'" alt="" /> </a> </div>')})})}$("#note-search-input").keyup(()=>{clearTimeout(typingTimer),typingTimer=setTimeout(noteDoneTyping,400)}),$("#note-search-input").keydown(()=>{clearTimeout(typingTimer)})}),$(document).ready(()=>{let typingTimer;function doneTyping(){var search=$("#search-input").val();$.ajax({method:"GET",url:"https://www.googleapis.com/books/v1/volumes?q="+search,error:function(){$("div.search-results").remove()}}).done(function(results){$("div.search-results").remove(),$(".search-bar").append("<div class='search-results'></div>");let counter=0;jQuery.each(results.items,function(i,val){if(counter++,counter<6){let bookInfo={id:results.items[i].id,title:results.items[i].volumeInfo.title,subtitle:results.items[i].volumeInfo.subtitle,authors:results.items[i].volumeInfo.authors};bookInfo.image=void 0===results.items[i].volumeInfo.imageLinks?missingimg:results.items[i].volumeInfo.imageLinks.smallThumbnail,bookInfo.publishDate=void 0===results.items[i].volumeInfo.publishedDate?"":results.items[i].volumeInfo.publishedDate,$(".search-results").append("<a href='/Readie/summary/"+bookInfo.id+"' class='search-result'><div class='thumbnail'><img src="+bookInfo.image+"></div><div class='text-info'><h4>"+bookInfo.title+"</h4><p>"+bookInfo.authors+"</p></div></a>")}})})}$("#search-input").keyup(()=>{clearTimeout(typingTimer),typingTimer=setTimeout(doneTyping,400)}),$("#search-input").keydown(()=>{clearTimeout(typingTimer)})}),window.addEventListener("click",function(evt){var x;$(".search-result").length&&(x=document.querySelector(".search-results"),evt.target!=document.querySelector("#search-input")?x.style.display="none":(x.style.display="flex",console.log("to")))}),$(function(){$("#shuffle").on("click",()=>{$(".loading-icon").css("visibility","visible"),$.ajax({method:"POST",url:"/Readie/ajax/browseshuffle.php",dataType:"json",data:{shuffle:1},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){$(".loading-icon").css("visibility","hidden"),$(".browse-item").remove();let dataone=rtnData[0];dataone.forEach(e=>{$(".book-row").prepend('<a href="/Readie/summary/'+e.id+'" class="browse-item"><div class="front"><img src="'+e.usedImage+'" alt="" /></div><div class="back"><h4>'+e.title+"</h4><p>"+e.authors+"</p></div></a>")}),rtnData[1].forEach(e=>{$(".book-row").prepend('<a href="/Readie/summary/'+e.id+'" class="browse-item"><div class="front"><img src="'+e.usedImage+'" alt="" /></div><div class="back"><h4>'+e.title+"</h4><p>"+e.authors+"</p></div></a>")})})})}),$(document).ready(()=>{let count=0,notecount=0,permcount=0;var timer=null,audio=new Audio("../audio/bloop.mp3");$("#timerStart").click(()=>{var h=$("#hour").val(),m=$("#min").val(),s=$("#sec").val();$("#timerStart").toggle(),$("#timerStop").toggle(),$(".timer-input").prop("disabled",!0),function(h,m,s){timer=setInterval(function(){var tempperm;count++,permcount++,0<s?2==--s&&0==m&0==h&&audio.load():0==s&&0<m?(s=59,m--,updateTimer(count,notecount),count=0):0==m&&0<h?(s=m=59,h--):0==s&&(tempperm=permcount,permcount=0,finishSession(tempperm,notecount)),$("#sec").val(s),$("#min").val(m),$("#hour").val(h)},1e3)}(h,m,s),count=0,notecount=0}),$("#timerStop").click(()=>{clearInterval(timer),$("#timerStart").toggle(),$("#timerStop").toggle(),$(".timer-input").prop("disabled",!1),updateTimer(count,notecount),count=0,notecount=0}),$("body").on("click","#createNote",function(e){""!=$("#noteText").val()&&notecount++}),$(".expandText").on("keydown",function(){10!=event.keyCode&&13!=event.keyCode||!event.ctrlKey||""!=$("#noteText").val()&&notecount++});const finishSession=(tempperm,notecount)=>{var oldTime=parseInt($(".timer-changer").attr("data-time")),oldNotes=parseInt($(".note-creation-box").attr("data-noteno"));clearInterval(timer),updateTimer(count),audio.play();var newTime=oldTime+tempperm,newNotes=oldNotes+notecount;$(".page-content").append("<div class='pop-up-box-container'><div class='edit-pop-up-box study-finish'><h4>Session Finished</h4><p>Time's up! All the notes you've created have been saved to the notes page. Meanwhile, you can use the  <span><i class='fa fa-ellipsis-v'></i></span> menu to publish, edit or delete your notes. </p><p id='time-record'>"+oldTime+"</p><p id='notes-number'>"+oldNotes+"</p><button id='cancel-button' class='cool'>Cool!</button></div></div>"),$(".timer-changer").attr("data-time",newTime),$(".note-creation-box").attr("data-noteno",newNotes),$({countNum:$("#time-record").html()}).animate({countNum:newTime},{duration:2e3,easing:"swing",step:function(){$("#time-record").html(Math.floor(this.countNum)+" seconds <span>+"+tempperm+"</span>")},complete:function(){$("#time-record").html(this.countNum+" seconds <span>+"+tempperm+"</span>")}}),$({countNum:$("#notes-number").html()}).animate({countNum:newNotes},{duration:2e3,easing:"swing",step:function(){$("#notes-number").html(Math.floor(this.countNum)+" notes <span>+"+notecount+"</span>")},complete:function(){$("#notes-number").html(this.countNum+" notes <span>+"+notecount+"</span>")}})},updateTimer=count=>{var book_id=$(".submit-note").data("bookid");$.ajax({method:"POST",url:"/Readie/ajax/updatetime.php",dataType:"json",data:{book_id:book_id,count:count},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown)}}).done(function(rtnData){console.log(rtnData)})}});